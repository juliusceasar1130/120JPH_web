<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>雪橇管理数据看板</title>
    <!-- 引入Element Plus样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- 引入Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- 引入Element Plus -->
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <!-- 引入Element Plus图标 -->
    <script src="https://unpkg.com/@element-plus/icons-vue/dist/index.iife.js"></script>
    
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 20px;
        }
        
        /* 核心指标卡片样式 */
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
        }
        
        .metric-card.online {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .metric-card.offline {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
        }
        
        .metric-card.cleaning {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }
        
        .metric-card.clean {
            background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
            color: #333;
        }
        
        .metric-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 8px 0;
        }
        
        .metric-label {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* 图表容器样式 */
        .chart-container {
            height: 350px;
            width: 100%;
        }
        
        /* 告警列表样式 */
        .alert-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-left: 4px solid #f56c6c;
            background: #fef0f0;
            margin-bottom: 8px;
            border-radius: 4px;
        }
        
        .alert-item.warning {
            border-left-color: #e6a23c;
            background: #fdf6ec;
        }
        
        /* 快捷操作按钮样式 */
        .quick-action-btn {
            width: 100%;
            height: 60px;
            font-size: 16px;
            margin-bottom: 12px;
        }
        
        /* 响应式布局 */
        @media (max-width: 768px) {
            .metric-number {
                font-size: 2rem;
            }
            
            .chart-container {
                height: 300px;
            }
        }
        
        /* 状态指示器 */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .status-online {
            background-color: #67c23a;
        }
        
        .status-offline {
            background-color: #909399;
        }
        
        .status-cleaning {
            background-color: #e6a23c;
        }
        
        .status-clean {
            background-color: #67c23a;
        }
        
        .status-moderate {
            background-color: #e6a23c;
        }
        
        .status-severe {
            background-color: #f56c6c;
        }
        
        /* 更新时间样式 */
        .update-time {
            color: #909399;
            font-size: 12px;
            text-align: right;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- 页面头部 -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">雪橇管理数据看板</h1>
                <p class="text-gray-600">实时监控雪橇状态，掌握关键业务指标</p>
            </div>
            <div class="flex gap-3">
                <el-button type="primary" @click="refreshData" :loading="loading">
                    <el-icon><Refresh /></el-icon>
                    刷新数据
                </el-button>
                <el-button @click="exportData">
                    <el-icon><Download /></el-icon>
                    导出报告
                </el-button>
            </div>
        </div>
        
        <!-- 核心指标卡片区域 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- 雪橇总数 -->
            <div class="metric-card">
                <div class="metric-label">雪橇总数</div>
                <div class="metric-number">{{ metrics.total }}</div>
                <div class="update-time">{{ lastUpdateTime }}</div>
            </div>
            
            <!-- 在线雪橇 -->
            <div class="metric-card online">
                <div class="metric-label">在线雪橇</div>
                <div class="metric-number">{{ metrics.online }}</div>
                <div class="text-sm opacity-80">占比 {{ ((metrics.online / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
            
            <!-- 离线雪橇 -->
            <div class="metric-card offline">
                <div class="metric-label">离线雪橇</div>
                <div class="metric-number">{{ metrics.offline }}</div>
                <div class="text-sm opacity-80">占比 {{ ((metrics.offline / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
            
            <!-- 清洗中雪橇 -->
            <div class="metric-card cleaning">
                <div class="metric-label">清洗中雪橇</div>
                <div class="metric-number">{{ metrics.cleaning }}</div>
                <div class="text-sm opacity-80">占比 {{ ((metrics.cleaning / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
        </div>
        
        <!-- 清洁度状态分布卡片 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="metric-card clean">
                <div class="metric-label">清洁状态 (C)</div>
                <div class="metric-number">{{ cleanStatus.clean }}</div>
                <div class="text-sm opacity-80">{{ ((cleanStatus.clean / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
            
            <div class="metric-card" style="background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);">
                <div class="metric-label">中度污染 (M)</div>
                <div class="metric-number">{{ cleanStatus.moderate }}</div>
                <div class="text-sm opacity-80">{{ ((cleanStatus.moderate / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
            
            <div class="metric-card" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);">
                <div class="metric-label">严重污染 (S)</div>
                <div class="metric-number">{{ cleanStatus.severe }}</div>
                <div class="text-sm opacity-80">{{ ((cleanStatus.severe / metrics.total) * 100).toFixed(1) }}%</div>
            </div>
        </div>
        
        <!-- 数据可视化图表区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- 雪橇状态分布饼图 -->
            <el-card>
                <template #header>
                    <div class="flex justify-between items-center">
                        <span class="font-semibold">雪橇状态分布</span>
                        <el-tag size="small">实时数据</el-tag>
                    </div>
                </template>
                <div id="statusPieChart" class="chart-container"></div>
            </el-card>
            
            <!-- 清洁度趋势折线图 -->
            <el-card>
                <template #header>
                    <div class="flex justify-between items-center">
                        <span class="font-semibold">清洁度变化趋势</span>
                        <el-select v-model="trendPeriod" size="small" style="width: 100px">
                            <el-option label="7天" value="week"></el-option>
                            <el-option label="30天" value="month"></el-option>
                        </el-select>
                    </div>
                </template>
                <div id="cleanTrendChart" class="chart-container"></div>
            </el-card>
        </div>
        
        <!-- 第二行图表 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- 上下线状态变化柱状图 -->
            <el-card>
                <template #header>
                    <span class="font-semibold">上下线状态变化</span>
                </template>
                <div id="statusChangeChart" class="chart-container"></div>
            </el-card>
            
            <!-- 最近24小时活动时间线 -->
            <el-card>
                <template #header>
                    <span class="font-semibold">最近24小时活动时间线</span>
                </template>
                <div id="activityTimelineChart" class="chart-container"></div>
            </el-card>
        </div>

        <!-- 告警与异常区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- 严重污染雪橇列表 -->
            <el-card>
                <template #header>
                    <div class="flex justify-between items-center">
                        <span class="font-semibold text-red-600">严重污染雪橇告警</span>
                        <el-badge :value="severeSkids.length" class="item">
                            <el-icon><Warning /></el-icon>
                        </el-badge>
                    </div>
                </template>
                <div class="max-h-64 overflow-y-auto">
                    <div v-for="skid in severeSkids" :key="skid.skidId" class="alert-item">
                        <div>
                            <div class="font-medium">{{ skid.skidId }}</div>
                            <div class="text-sm text-gray-600">
                                <span class="status-indicator status-severe"></span>
                                检测时间: {{ skid.inspectionTime }}
                            </div>
                        </div>
                        <el-button size="small" type="danger" @click="handleSkidDetail(skid.skidId)">
                            查看详情
                        </el-button>
                    </div>
                    <div v-if="severeSkids.length === 0" class="text-center text-gray-500 py-4">
                        暂无严重污染雪橇
                    </div>
                </div>
            </el-card>

            <!-- 长时间离线雪橇提醒 -->
            <el-card>
                <template #header>
                    <div class="flex justify-between items-center">
                        <span class="font-semibold text-orange-600">长时间离线雪橇</span>
                        <el-badge :value="longOfflineSkids.length" class="item">
                            <el-icon><Clock /></el-icon>
                        </el-badge>
                    </div>
                </template>
                <div class="max-h-64 overflow-y-auto">
                    <div v-for="skid in longOfflineSkids" :key="skid.skidId" class="alert-item warning">
                        <div>
                            <div class="font-medium">{{ skid.skidId }}</div>
                            <div class="text-sm text-gray-600">
                                <span class="status-indicator status-offline"></span>
                                离线时长: {{ skid.offlineDuration }}
                            </div>
                        </div>
                        <el-button size="small" type="warning" @click="handleSkidDetail(skid.skidId)">
                            查看详情
                        </el-button>
                    </div>
                    <div v-if="longOfflineSkids.length === 0" class="text-center text-gray-500 py-4">
                        暂无长时间离线雪橇
                    </div>
                </div>
            </el-card>
        </div>

        <!-- 快捷操作区域 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <el-card>
                <template #header>
                    <span class="font-semibold">快捷操作</span>
                </template>
                <div class="space-y-3">
                    <el-button class="quick-action-btn" type="primary" @click="goToSkidList">
                        <el-icon><List /></el-icon>
                        雪橇一览表
                    </el-button>
                    <el-button class="quick-action-btn" @click="goToCleanHistory">
                        <el-icon><DocumentCopy /></el-icon>
                        清洁度历史
                    </el-button>
                    <el-button class="quick-action-btn" @click="goToStatusHistory">
                        <el-icon><Clock /></el-icon>
                        上下线历史
                    </el-button>
                </div>
            </el-card>

            <el-card>
                <template #header>
                    <span class="font-semibold">数据导出</span>
                </template>
                <div class="space-y-3">
                    <el-button class="quick-action-btn" @click="exportSkidData">
                        <el-icon><Download /></el-icon>
                        导出雪橇数据
                    </el-button>
                    <el-button class="quick-action-btn" @click="exportTrendData">
                        <el-icon><TrendCharts /></el-icon>
                        导出趋势报告
                    </el-button>
                    <el-button class="quick-action-btn" @click="exportAlertData">
                        <el-icon><Warning /></el-icon>
                        导出告警数据
                    </el-button>
                </div>
            </el-card>

            <el-card>
                <template #header>
                    <span class="font-semibold">系统设置</span>
                </template>
                <div class="space-y-3">
                    <el-button class="quick-action-btn" @click="openSettings">
                        <el-icon><Setting /></el-icon>
                        看板设置
                    </el-button>
                    <el-button class="quick-action-btn" @click="openAlertSettings">
                        <el-icon><Bell /></el-icon>
                        告警设置
                    </el-button>
                    <el-button class="quick-action-btn" @click="openUserManagement">
                        <el-icon><User /></el-icon>
                        用户管理
                    </el-button>
                </div>
            </el-card>

            <el-card>
                <template #header>
                    <span class="font-semibold">系统状态</span>
                </template>
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="text-sm text-gray-600">数据更新状态</div>
                        <el-tag :type="dataStatus === 'normal' ? 'success' : 'danger'" size="small">
                            {{ dataStatus === 'normal' ? '正常' : '异常' }}
                        </el-tag>
                    </div>
                    <div class="text-center">
                        <div class="text-sm text-gray-600">最后更新</div>
                        <div class="text-xs text-gray-500">{{ lastUpdateTime }}</div>
                    </div>
                    <div class="text-center">
                        <div class="text-sm text-gray-600">自动刷新</div>
                        <el-switch v-model="autoRefresh" @change="toggleAutoRefresh"></el-switch>
                    </div>
                </div>
            </el-card>
        </div>
    </div>

    <!-- JavaScript逻辑 -->
    <script>
        const { createApp } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;

        // 创建Vue应用
        createApp({
            data() {
                return {
                    // 加载状态
                    loading: false,

                    // 核心指标数据
                    metrics: {
                        total: 156,
                        online: 89,
                        offline: 52,
                        cleaning: 15
                    },

                    // 清洁度状态分布
                    cleanStatus: {
                        clean: 98,      // C - 清洁
                        moderate: 43,   // M - 中度
                        severe: 15      // S - 严重
                    },

                    // 趋势图时间周期
                    trendPeriod: 'week',

                    // 严重污染雪橇列表
                    severeSkids: [
                        {
                            skidId: 'SKID-001',
                            inspectionTime: '2024-01-26 14:30:00',
                            cleanStatus: 'S'
                        },
                        {
                            skidId: 'SKID-045',
                            inspectionTime: '2024-01-26 13:15:00',
                            cleanStatus: 'S'
                        },
                        {
                            skidId: 'SKID-089',
                            inspectionTime: '2024-01-26 12:45:00',
                            cleanStatus: 'S'
                        }
                    ],

                    // 长时间离线雪橇列表
                    longOfflineSkids: [
                        {
                            skidId: 'SKID-023',
                            offlineDuration: '18小时30分',
                            statusChangeTime: '2024-01-25 20:00:00'
                        },
                        {
                            skidId: 'SKID-067',
                            offlineDuration: '12小时15分',
                            statusChangeTime: '2024-01-26 02:45:00'
                        }
                    ],

                    // 系统状态
                    dataStatus: 'normal',
                    autoRefresh: true,
                    autoRefreshTimer: null,

                    // 图表实例
                    charts: {
                        statusPie: null,
                        cleanTrend: null,
                        statusChange: null,
                        activityTimeline: null
                    }
                }
            },

            computed: {
                // 最后更新时间
                lastUpdateTime() {
                    return new Date().toLocaleString('zh-CN');
                }
            },

            mounted() {
                // 初始化图表
                this.initCharts();

                // 启动自动刷新
                if (this.autoRefresh) {
                    this.startAutoRefresh();
                }
            },

            beforeUnmount() {
                // 清理定时器
                if (this.autoRefreshTimer) {
                    clearInterval(this.autoRefreshTimer);
                }

                // 销毁图表实例
                Object.values(this.charts).forEach(chart => {
                    if (chart) {
                        chart.dispose();
                    }
                });
            },

            methods: {
                // 初始化所有图表
                initCharts() {
                    this.$nextTick(() => {
                        this.initStatusPieChart();
                        this.initCleanTrendChart();
                        this.initStatusChangeChart();
                        this.initActivityTimelineChart();
                    });
                },

                // 初始化状态分布饼图
                initStatusPieChart() {
                    const chartDom = document.getElementById('statusPieChart');
                    this.charts.statusPie = echarts.init(chartDom);

                    const option = {
                        title: {
                            text: '雪橇状态分布',
                            left: 'center',
                            textStyle: {
                                fontSize: 16,
                                fontWeight: 'bold'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            left: 'left',
                            data: ['在线', '离线', '清洗中']
                        },
                        series: [
                            {
                                name: '雪橇状态',
                                type: 'pie',
                                radius: '50%',
                                data: [
                                    { value: this.metrics.online, name: '在线', itemStyle: { color: '#67c23a' } },
                                    { value: this.metrics.offline, name: '离线', itemStyle: { color: '#909399' } },
                                    { value: this.metrics.cleaning, name: '清洗中', itemStyle: { color: '#e6a23c' } }
                                ],
                                emphasis: {
                                    itemStyle: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                }
                            }
                        ]
                    };

                    this.charts.statusPie.setOption(option);
                },

                // 初始化清洁度趋势折线图
                initCleanTrendChart() {
                    const chartDom = document.getElementById('cleanTrendChart');
                    this.charts.cleanTrend = echarts.init(chartDom);

                    // 模拟7天的趋势数据
                    const dates = [];
                    const cleanData = [];
                    const moderateData = [];
                    const severeData = [];

                    for (let i = 6; i >= 0; i--) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        dates.push(date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' }));

                        // 模拟数据变化
                        cleanData.push(Math.floor(Math.random() * 20) + 80);
                        moderateData.push(Math.floor(Math.random() * 15) + 30);
                        severeData.push(Math.floor(Math.random() * 10) + 10);
                    }

                    const option = {
                        title: {
                            text: '清洁度变化趋势',
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['清洁(C)', '中度(M)', '严重(S)'],
                            bottom: 10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: dates
                        },
                        yAxis: {
                            type: 'value',
                            name: '数量'
                        },
                        series: [
                            {
                                name: '清洁(C)',
                                type: 'line',
                                stack: 'Total',
                                data: cleanData,
                                itemStyle: { color: '#67c23a' }
                            },
                            {
                                name: '中度(M)',
                                type: 'line',
                                stack: 'Total',
                                data: moderateData,
                                itemStyle: { color: '#e6a23c' }
                            },
                            {
                                name: '严重(S)',
                                type: 'line',
                                stack: 'Total',
                                data: severeData,
                                itemStyle: { color: '#f56c6c' }
                            }
                        ]
                    };

                    this.charts.cleanTrend.setOption(option);
                },

                // 初始化状态变化柱状图
                initStatusChangeChart() {
                    const chartDom = document.getElementById('statusChangeChart');
                    this.charts.statusChange = echarts.init(chartDom);

                    const hours = [];
                    const onlineData = [];
                    const offlineData = [];

                    // 生成最近24小时的数据
                    for (let i = 23; i >= 0; i--) {
                        const hour = new Date();
                        hour.setHours(hour.getHours() - i);
                        hours.push(hour.getHours() + ':00');

                        onlineData.push(Math.floor(Math.random() * 10) + 5);
                        offlineData.push(Math.floor(Math.random() * 8) + 2);
                    }

                    const option = {
                        title: {
                            text: '24小时上下线变化',
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        legend: {
                            data: ['上线', '下线'],
                            bottom: 10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: hours
                        },
                        yAxis: {
                            type: 'value',
                            name: '次数'
                        },
                        series: [
                            {
                                name: '上线',
                                type: 'bar',
                                data: onlineData,
                                itemStyle: { color: '#67c23a' }
                            },
                            {
                                name: '下线',
                                type: 'bar',
                                data: offlineData,
                                itemStyle: { color: '#f56c6c' }
                            }
                        ]
                    };

                    this.charts.statusChange.setOption(option);
                },

                // 初始化活动时间线图表
                initActivityTimelineChart() {
                    const chartDom = document.getElementById('activityTimelineChart');
                    this.charts.activityTimeline = echarts.init(chartDom);

                    // 模拟最近24小时的活动数据
                    const timelineData = [];
                    const now = new Date();

                    for (let i = 0; i < 20; i++) {
                        const time = new Date(now.getTime() - Math.random() * 24 * 60 * 60 * 1000);
                        const activities = ['上线', '下线', '开始清洗', '完成清洗', '检测完成'];
                        const activity = activities[Math.floor(Math.random() * activities.length)];
                        const skidId = 'SKID-' + String(Math.floor(Math.random() * 200) + 1).padStart(3, '0');

                        timelineData.push({
                            name: time.toLocaleTimeString('zh-CN'),
                            value: [
                                time.toISOString(),
                                activity,
                                skidId
                            ]
                        });
                    }

                    // 按时间排序
                    timelineData.sort((a, b) => new Date(a.value[0]) - new Date(b.value[0]));

                    const option = {
                        title: {
                            text: '最近24小时活动时间线',
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: function(params) {
                                const time = new Date(params.value[0]).toLocaleString('zh-CN');
                                return `${time}<br/>${params.value[2]}: ${params.value[1]}`;
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'time',
                            splitLine: {
                                show: false
                            }
                        },
                        yAxis: {
                            type: 'category',
                            data: ['活动'],
                            axisLabel: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            }
                        },
                        series: [
                            {
                                name: '活动',
                                type: 'scatter',
                                data: timelineData.map(item => [item.value[0], 0, item.value[1], item.value[2]]),
                                symbolSize: function(data) {
                                    return 8;
                                },
                                itemStyle: {
                                    color: function(params) {
                                        const activity = params.data[2];
                                        const colorMap = {
                                            '上线': '#67c23a',
                                            '下线': '#f56c6c',
                                            '开始清洗': '#e6a23c',
                                            '完成清洗': '#409eff',
                                            '检测完成': '#909399'
                                        };
                                        return colorMap[activity] || '#409eff';
                                    }
                                }
                            }
                        ]
                    };

                    this.charts.activityTimeline.setOption(option);
                },

                // 刷新数据
                async refreshData() {
                    this.loading = true;
                    try {
                        // 模拟API调用延迟
                        await new Promise(resolve => setTimeout(resolve, 1000));

                        // 模拟数据更新
                        this.metrics.online = Math.floor(Math.random() * 20) + 80;
                        this.metrics.offline = Math.floor(Math.random() * 15) + 45;
                        this.metrics.cleaning = Math.floor(Math.random() * 10) + 10;
                        this.metrics.total = this.metrics.online + this.metrics.offline + this.metrics.cleaning;

                        // 更新图表
                        this.initCharts();

                        ElMessage.success('数据刷新成功');
                    } catch (error) {
                        ElMessage.error('数据刷新失败');
                    } finally {
                        this.loading = false;
                    }
                },

                // 导出数据
                exportData() {
                    ElMessage.info('正在准备导出数据...');
                    // 这里可以实现实际的导出逻辑
                },

                // 查看雪橇详情
                handleSkidDetail(skidId) {
                    ElMessage.info(`查看雪橇 ${skidId} 的详细信息`);
                    // 这里可以跳转到详情页面或打开详情弹窗
                },

                // 快捷操作 - 跳转到雪橇一览表
                goToSkidList() {
                    ElMessage.info('跳转到雪橇一览表');
                    // window.location.href = '/skid/home';
                },

                // 快捷操作 - 跳转到清洁度历史
                goToCleanHistory() {
                    ElMessage.info('跳转到清洁度历史');
                    // window.location.href = '/skid/history-clean';
                },

                // 快捷操作 - 跳转到上下线历史
                goToStatusHistory() {
                    ElMessage.info('跳转到上下线历史');
                    // window.location.href = '/skid/history-status';
                },

                // 导出雪橇数据
                exportSkidData() {
                    ElMessage.info('正在导出雪橇数据...');
                },

                // 导出趋势报告
                exportTrendData() {
                    ElMessage.info('正在导出趋势报告...');
                },

                // 导出告警数据
                exportAlertData() {
                    ElMessage.info('正在导出告警数据...');
                },

                // 打开设置
                openSettings() {
                    ElMessage.info('打开看板设置');
                },

                // 打开告警设置
                openAlertSettings() {
                    ElMessage.info('打开告警设置');
                },

                // 打开用户管理
                openUserManagement() {
                    ElMessage.info('打开用户管理');
                },

                // 切换自动刷新
                toggleAutoRefresh() {
                    if (this.autoRefresh) {
                        this.startAutoRefresh();
                    } else {
                        this.stopAutoRefresh();
                    }
                },

                // 启动自动刷新
                startAutoRefresh() {
                    this.autoRefreshTimer = setInterval(() => {
                        this.refreshData();
                    }, 30000); // 30秒刷新一次
                },

                // 停止自动刷新
                stopAutoRefresh() {
                    if (this.autoRefreshTimer) {
                        clearInterval(this.autoRefreshTimer);
                        this.autoRefreshTimer = null;
                    }
                }
            }
        }).use(ElementPlus).mount('#app');

        // 窗口大小改变时重新调整图表大小
        window.addEventListener('resize', () => {
            Object.values(window.app?.charts || {}).forEach(chart => {
                if (chart) {
                    chart.resize();
                }
            });
        });
    </script>
</body>
</html>

                // 初始化清洁度趋势折线图
                initCleanTrendChart() {
                    const chartDom = document.getElementById('cleanTrendChart');
                    this.charts.cleanTrend = echarts.init(chartDom);

                    // 模拟7天的趋势数据
                    const dates = [];
                    const cleanData = [];
                    const moderateData = [];
                    const severeData = [];

                    for (let i = 6; i >= 0; i--) {
                        const date = new Date();
                        date.setDate(date.getDate() - i);
                        dates.push(date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' }));

                        // 模拟数据变化
                        cleanData.push(Math.floor(Math.random() * 20) + 80);
                        moderateData.push(Math.floor(Math.random() * 15) + 30);
                        severeData.push(Math.floor(Math.random() * 10) + 10);
                    }

                    const option = {
                        title: {
                            text: '清洁度变化趋势',
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['清洁(C)', '中度(M)', '严重(S)'],
                            bottom: 10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: dates
                        },
                        yAxis: {
                            type: 'value',
                            name: '数量'
                        },
                        series: [
                            {
                                name: '清洁(C)',
                                type: 'line',
                                stack: 'Total',
                                data: cleanData,
                                itemStyle: { color: '#67c23a' }
                            },
                            {
                                name: '中度(M)',
                                type: 'line',
                                stack: 'Total',
                                data: moderateData,
                                itemStyle: { color: '#e6a23c' }
                            },
                            {
                                name: '严重(S)',
                                type: 'line',
                                stack: 'Total',
                                data: severeData,
                                itemStyle: { color: '#f56c6c' }
                            }
                        ]
                    };

                    this.charts.cleanTrend.setOption(option);
                },

                // 初始化状态变化柱状图
                initStatusChangeChart() {
                    const chartDom = document.getElementById('statusChangeChart');
                    this.charts.statusChange = echarts.init(chartDom);

                    const hours = [];
                    const onlineData = [];
                    const offlineData = [];

                    // 生成最近24小时的数据
                    for (let i = 23; i >= 0; i--) {
                        const hour = new Date();
                        hour.setHours(hour.getHours() - i);
                        hours.push(hour.getHours() + ':00');

                        onlineData.push(Math.floor(Math.random() * 10) + 5);
                        offlineData.push(Math.floor(Math.random() * 8) + 2);
                    }

                    const option = {
                        title: {
                            text: '24小时上下线变化',
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        legend: {
                            data: ['上线', '下线'],
                            bottom: 10
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: hours
                        },
                        yAxis: {
                            type: 'value',
                            name: '次数'
                        },
                        series: [
                            {
                                name: '上线',
                                type: 'bar',
                                data: onlineData,
                                itemStyle: { color: '#67c23a' }
                            },
                            {
                                name: '下线',
                                type: 'bar',
                                data: offlineData,
                                itemStyle: { color: '#f56c6c' }
                            }
                        ]
                    };

                    this.charts.statusChange.setOption(option);
                },
